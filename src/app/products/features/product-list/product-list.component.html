<h1 class="text-center">Liste des produits</h1>

<p-button label="Créer produit" (onClick)="onCreate()" class="block text-center"/>

<p-dataView #dv [value]="products()">
    <ng-template pTemplate="list" let-products>
        @for (product of products; track product) {
            <p-card class="block mb-2"> 
             
      <!-- Nom du produit -->
         <p><strong>Nom du produit:</strong> {{ product.name }}</p>      
     
      <!-- Prix -->
      <p><strong>Prix:</strong> {{ product.price}}</p>

      <!-- Quantité disponible -->
      <p><strong>Quantité:</strong> {{ product.quantity }}</p>

      <!-- Référence interne -->
      <p><strong>Réf. interne:</strong> {{ product.internalReference }}</p>

      <!-- Shell ID -->
      <p><strong>Shell ID:</strong> {{ product.shellId }}</p>

      <p>
        <strong>Note:</strong>
        <span class="rating-badge">{{ product.rating }}/5</span>
      </p>
                <ng-template pTemplate="footer">
                    <div class="flex gap-3 mt-1">
                        <p-button label="Modifier" severity="secondary" (onClick)="onUpdate(product)"/>
                        <p-button label="Supprimer" severity="danger" (onClick)="onDelete(product)" />
                        <p-button label="Ajouter au panier" icon="pi pi-cart-plus" (click)="addToCart(product)"/>
                    </div>
                </ng-template>
            </p-card>
        }
    </ng-template>
</p-dataView>

<p-dialog [(visible)]="isDialogVisible"
    [style]="{ width: '50vw' }"
    header="Ajout/Edition produit">
    <app-product-form
        [product]="editedProduct()"
        (save)="onSave($event)"
        (cancel)="onCancel()"
    />
</p-dialog>